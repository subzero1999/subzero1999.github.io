"use strict";var p=function(a){return console.log(a)},cdr_const=0.3,tl,tw,ta,cdr,rdr,lw,straight,rendered=!1,l=633,h=544,total_area=function(a,b){return a*b},total_length=function(a,b,c,d,f){return a+2*b+c*d+2*f},total_width=function(a,b,c,d){return b*c+2*a+2*d},find_curve_length=function(a){return(400-2*a)/2},find_rdr=function(a){var b=2*find_curve_length(a),c=b/(2*Math.PI);return c},find_cdr=function(a){return a-cdr_const},click_handler=function(a){a.preventDefault();var b=parseFloat(document.getElementById("length").value),c=parseFloat(document.getElementById("width").value),d=parseInt(document.getElementById("extra").value)||0;return cdr_const=$("#nonstan").prop("checked")?0.2:0.3,0<!b||0<!c||90<b||90<c?void alert("Enter values properly."):void(straight=b,lw=c,rdr=find_rdr(b),cdr=find_cdr(rdr),tl=total_length(b,cdr,8,c,d).toFixed(2),tw=total_width(cdr,8,c,d).toFixed(2),ta=total_area(tl,tw).toFixed(2),rendered=!1,$("#tl").text(tl+"m"),$("#tw").text(tw+"m"),$("#ta").html(ta+"m<sup>2</sup>"),$(".res").fadeIn(400),$("html, body").animate({scrollTop:$("#tracklink").offset().top},200))},renderCanvas=function(){var a=document.getElementById("canvas"),b=a.getContext("2d");track_image=new Image,track_image.src="track400.jpg",track_image.onload=function(){b.drawImage(track_image,0,0)};var c="Total Length: "+tl+"m, Total Width: "+tw+"m";b.fillText(c,l/2-110,h-30),b.fillText("Track: 400m, Lanes: 8",l/2-70,h-10)},renderStaggers=function(){if(!rendered){for(var a=[0],b=[0],c=2;8>=c;c++)a.push((2*(lw*(c-1)-0.1)*Math.PI).toFixed(2)),b.push(((lw*(c-1)-0.1)*Math.PI).toFixed(2));var d="\n    <p>Length of the straight: "+straight+"</p>\n    <p>Lane width: "+lw+"</p>\n    <p>RDR (Running Distance Radius): "+rdr.toFixed(2)+"</p>\n    <p>CDR (Curved Distance Radius): "+cdr.toFixed(2)+"</p>\n  ";$("#trackstats").append(d);for(var g,f=0;8>f;f++)g="\n    <tr>\n      <td class=\"center\">"+(f+1)+"</td>\n      <td class=\"center\">"+a[f]+"</td>\n      <td class=\"center\">"+b[f]+"</td>\n    </tr>\n    ",$("#staggers").append(g);$("#staggers").addClass("centered"),rendered=!0}},generatePDF=function(a){a.preventDefault();var d=new jsPDF;d.setFontType("bold"),d.text(105,20,"Track Measurement",null,null,"center"),d.setFontType("normal"),d.text(105,30,"Approximated diagram of the track using the latest IAAF standards",null,null,"center"),d.addImage(dataURL,"PNG",25,40,null,null),d.text(105,170,"Total Area: "+ta,null,null,"center"),d.text(105,180,"Total Length: "+tl,null,null,"center"),d.text(105,190,"Total Width: "+tw,null,null,"center"),d.text(105,200,"Running Distance Radius: "+rdr.toFixed(2),null,null,"center"),d.text(105,210,"Curved Distance Radius: "+cdr.toFixed(2),null,null,"center");var b=document.getElementById("staggers"),c=d.autoTableHtmlToJson(b);d.autoTable(c.columns,c.data,{startY:215}),window.open(d.output("datauristring"))},dataURL,img=new Image;img.src="track400.jpg",img.setAttribute("crossOrigin","anonymous"),img.addEventListener("load",function(){var a=document.createElement("canvas");a.width=img.width,a.height=img.height;var b=a.getContext("2d");b.drawImage(img,0,0),dataURL=a.toDataURL()}),$("#calculate").on("click",click_handler),$("#tracklink").on("click",function(a){a.preventDefault(),renderStaggers(),$("#input").fadeOut(250,function(){$("#track").fadeIn(1e3)}),$("html, body").animate({scrollTop:100},200)}),$("#measurelink").on("click",function(a){a.preventDefault(),$("#track").fadeOut(250,function(){$("#input").fadeIn(1e3)})}),$("#downloadlink").on("click",generatePDF);
